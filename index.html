<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Left-Sided Studios</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/umd/lucide.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap');
        
        /* 1. Base Body Styles (Dark Mode Defaults) */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0a0a0a;
            color: #e5e5e5;
            background-image: url('https://github.com/vermetra/lsswebsite/blob/main/images/lss_bg.png?raw=true');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            /* Smooth transition for theme change */
            transition: background-color 0.5s ease-in-out, color 0.5s ease-in-out; 
        }

        /* 2. Background Overlay for Readability (Dark Mode) */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            /* Base dark layer to dim the image */
            background-color: rgba(10, 10, 10, 0.85); 
            /* Radial gradient mask */
            background-image: radial-gradient(circle at center, 
                rgba(10, 10, 10, 1) 0%,      /* Center is pure black */
                rgba(10, 10, 10, 0.9) 60%,   /* Mid-area starts blending */
                rgba(10, 10, 10, 0.7) 100%   /* Edges are most transparent/image visible */
            );
            transition: background-image 0.5s ease-in-out, background-color 0.5s ease-in-out;
        }

        /* 3. LIGHT MODE STYLES */
        body.light-mode {
            background-color: #f7f7f7; /* Light background */
            color: #1f2937; /* Dark text */
        }

        body.light-mode::before {
            /* Light mode overlay - keeps center light, fades background image */
            background-color: rgba(247, 247, 247, 0.85); 
            background-image: radial-gradient(circle at center, 
                rgba(255, 255, 255, 1) 0%,      /* Center is pure white */
                rgba(247, 247, 247, 0.9) 60%,   /* Mid-area starts blending */
                rgba(247, 247, 247, 0.7) 100%   /* Edges are most transparent/image visible */
            );
        }

        /* Light Mode UI Overrides */
        body.light-mode nav {
            background-color: #ffffffd0; 
            border-color: #e5e5e5;
            color: #1f2937;
        }
        body.light-mode nav .text-gray-500 { color: #4b5563; }
        body.light-mode nav button:hover { color: #000000; }
        
        body.light-mode .bg-white\/5, 
        body.light-mode .bg-white\/10 {
            background-color: rgba(0, 0, 0, 0.05);
        }
        
        body.light-mode .bg-neutral-950, 
        body.light-mode .bg-neutral-900 {
            background-color: #ffffff; 
            border-color: #e5e5e5; 
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08); /* subtle shadow in light mode */
        }

        /* Text color overrides */
        body.light-mode .text-gray-400, 
        body.light-mode .text-gray-500 { color: #4b5563; }
        body.light-mode .text-gray-600 { color: #6b7280; }
        body.light-mode .text-white { color: #1f2937; }
        
        /* Footer overrides */
        body.light-mode footer {
            background-color: #ffffff;
            border-color: #e5e5e5;
        }
        body.light-mode .text-neutral-600 { color: #9ca3af; }


        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0a0a0a; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }
        /* Light mode scrollbar adjustment */
        body.light-mode ::-webkit-scrollbar-track { background: #f0f0f0; }
        body.light-mode ::-webkit-scrollbar-thumb { background: #bbb; }
        body.light-mode ::-webkit-scrollbar-thumb:hover { background: #999; }

        .fade-in {
            animation: fadeIn 0.4s ease-out forwards;
            opacity: 0;
            transform: translateY(10px);
        }

        @keyframes fadeIn {
            to { opacity: 1; transform: translateY(0); }
        }

        .card-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 40px -10px rgba(255,255,255,0.1);
            border-color: rgba(255,255,255,0.4);
        }
        body.light-mode .card-hover:hover {
            box-shadow: 0 10px 40px -10px rgba(0,0,0,0.15);
            border-color: rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 bg-black/80 backdrop-blur-md border-b border-white/10">
        <div class="max-w-7xl mx-auto px-6 h-16 flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <div class="text-xl font-bold tracking-tighter cursor-pointer hover:text-white transition-colors" onclick="renderPage('home')">
                    LEFT-SIDED <span class="text-gray-500">STUDIOS</span>
                </div>
                <!-- New Google Site Button - Dynamically controlled by JS -->
                <button id="google-site-button" onclick="redirectToGoogleSite()" class="hidden md:flex items-center gap-1 text-xs font-semibold text-gray-400 bg-white/5 px-3 py-1 rounded-full hover:bg-white/10 transition-colors">
                    <i data-lucide="arrow-left" class="w-3 h-3"></i> Back to Google Site
                </button>
            </div>
            
            <div class="hidden md:flex space-x-8 text-sm font-medium text-gray-400">
                <button onclick="renderPage('games')" class="hover:text-white transition-colors">GAMES</button>
                <button onclick="renderPage('subsidiaries')" class="hover:text-white transition-colors">SUBSIDIARIES</button>
                <button onclick="renderPage('partners')" class="hover:text-white transition-colors">PARTNERS</button>
                <button onclick="renderPage('contact')" class="hover:text-white transition-colors">CONTACT</button>
                <!-- THEME TOGGLE BUTTON -->
                <button id="theme-toggle" onclick="toggleTheme()" class="hover:text-white transition-colors">
                    <i data-lucide="sun" class="w-5 h-5"></i>
                </button>
            </div>
            <button class="md:hidden text-white" onclick="toggleMobileMenu()">
                <i data-lucide="menu"></i>
            </button>
        </div>
        
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-neutral-900 border-b border-white/10">
            <div class="flex flex-col p-4 space-y-4">
                <button onclick="renderPage('games'); toggleMobileMenu()" class="text-left text-gray-300">Games</button>
                <button onclick="renderPage('subsidiaries'); toggleMobileMenu()" class="text-left text-gray-300">Subsidiaries</button>
                <button onclick="renderPage('partners'); toggleMobileMenu()" class="text-left text-gray-300">Partners</button>
                <button onclick="renderPage('contact'); toggleMobileMenu()" class="text-left text-gray-300">Contact</button>
                <button onclick="toggleTheme();" class="text-left text-gray-300 flex items-center gap-2">
                    <i id="mobile-theme-icon" data-lucide="sun" class="w-4 h-4"></i> Theme
                </button>
                <button onclick="redirectToGoogleSite(); toggleMobileMenu()" class="text-left text-xs font-semibold text-gray-400 pt-4 flex items-center gap-2">
                    <i data-lucide="arrow-left" class="w-3 h-3"></i> Back to Google Site
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main id="app" class="flex-grow pt-24 pb-20 px-6 max-w-7xl mx-auto w-full">
        <!-- Content is injected here by JS -->
    </main>

    <!-- Footer -->
    <footer class="border-t border-white/10 py-12 bg-neutral-950 mt-auto">
        <div class="max-w-7xl mx-auto px-6 grid grid-cols-1 md:grid-cols-3 gap-12">
            <div>
                <h3 class="text-lg font-bold mb-4 text-white">Left-Sided Studios</h3>
                <p class="text-gray-500 text-sm leading-relaxed">
                    Independent game development studio sharing original games and projects on GameJolt and other platforms.
                </p>
            </div>
            <div>
                <h3 class="text-lg font-bold mb-4 text-white">Connect</h3>
                <ul id="connect-links" class="space-y-2 text-sm text-gray-500">
                    <!-- Links dynamically generated here by updateConnectLinks() -->
                </ul>
            </div>
        </div>
        <div class="text-center text-neutral-600 text-xs mt-12">
            &copy; 2025 Left-Sided Studios. All rights reserved.
        </div>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // Global state for current page context
        let currentPageName = 'home';
        let currentPageId = null;

        // ==========================================
        // DATABASE: OFFICIAL CONTENT
        // ==========================================
        const db = {
            about: {
                title: "Welcome to Left-Sided Studios",
                subtitle: "Explore our creations, updates, and fan content, including unique experiences inspired by popular franchises.",
                featuredImage: "https://raw.githubusercontent.com/vermetra/lsswebsite/main/images/studios/leftsided1920.png?raw=true", 
                text: "Hey all! This is Vermetra, Co-Founder of Left-Sided Studios. We are an independent game development studio sharing original games and projects on GameJolt and other platforms. We build unique experiences ranging from original IPs to fan-inspired media."
            },
            // Google Site Mapping - UPDATED WITH ?authuser=0
            siteMap: {
                home: "https://sites.google.com/view/leftsidedstudios/home?authuser=0", 
                games: "https://sites.google.com/view/leftsidedstudios/games?authuser=0",
                subsidiaries: "https://sites.google.com/view/leftsidedstudios/subsidiaries?authuser=0",
                partners: "https://sites.google.com/view/leftsidedstudios/partners?authuser=0",
                contact: "https://sites.google.com/view/leftsidedstudios/contact-us?authuser=0"
            },
            // Team and Individual Links for the Footer (Original structure)
            people: [
                { name: "Vermetra (Co-Founder)", link: "https://youtube.com/@vermetra", icon: "youtube" },
                { name: "DaRealSansYT", link: "https://gamejolt.com/@DaRealSansYT", icon: "gamepad-2" }, // Assuming GameJolt presence
                { name: "RocketBlasts (Co-Founder)", link: "https://gamejolt.com/@RocketBlasts", icon: "zap" } // Assuming GameJolt presence
            ],
            // NEW Comprehensive Team Details for the About Section
            teamDetails: {
                vermetra: {
                    name: "Vermetra",
                    role: "Co-Founder & Lead Developer",
                    bio: "Gamer, Game Dev, and Co-Founder of Left-Sided Studios. Huge VλLVᴱ, FNaF, and Robot 64 Fan. I also love technology/techtube stuff.",
                    image: "https://placehold.co/100x100/4c1d95/e0e7ff?text=V",
                    links: [
                        { icon: "youtube", url: "https://youtube.com/@vermetra", label: "YouTube" },
                        { icon: "twitter", url: "https://x.com/vermetra", label: "X (Twitter)" },
                    ]
                },
                darealsansyt: {
                    name: "DaRealSansYT",
                    role: "Co-Founder & Content Creator",
                    bio: "Nerd, YouTuber, Anime enjoyer. Avid stalker of all thing Hatsune Miku.",
                    image: "https://placehold.co/100x100/b91c1c/fee2e2?text=S",
                    links: [
                        { icon: "youtube", url: "https://youtube.com/@SansYT4Real", label: "YouTube" },
                        { icon: "twitter", url: "https://x.com/darealsansyt", label: "X (Twitter)" },
                    ]
                },
                rocketblasts: {
                    name: "RocketBlasts",
                    role: "Co-Founder & Creative Designer",
                    bio: "Co-Founder and Creative Designer for LSS. Focusing on innovative game mechanics and visual identity for our titles.",
                    image: "https://placehold.co/100x100/065f46/d1fae5?text=R",
                    links: [
                        { icon: "youtube", url: "https://www.youtube.com/@Rocketblast1843", label: "YouTube" },
                    ]
                }
            },
            // ---------------------------------
            // MAIN STUDIO GAMES
            // ---------------------------------
            games: [
                {
                    id: "game_cardamania",
                    title: "Cardamania",
                    description: "Lead your Academy to Victory.",
                    fullText: "The rounds are up and the attacks are inbound. Cardamania is a game inspired by Magic the Gathering Commander where you lead your Academy to Victory in this new online TCG battle game!",
                    image: "https://raw.githubusercontent.com/vermetra/lsswebsite/main/images/games/cardamania_promo_image.png?raw=true", 
                    releaseDate: "Available 2028",
                    link: "https://gamejolt.com/games/cardamania/1028689"
                },
                {
                    id: "game_bumbl",
                    title: "Bumbl",
                    description: "Action-adventure strategy on Planet SL-3.",
                    fullText: "Bumbl is an action-adventure, strategy game inspired by that one game by that really big Japanese company. Explore the recently discovered planet SL-3, hosting a colorful cast of little 'Buggies' that are here to help you! Collect little artifacts, technology bits, and so much more!",
                    image: "https://raw.githubusercontent.com/vermetra/lsswebsite/main/images/games/wander_logo_bumbl.png?raw=true", 
                    releaseDate: "Coming Soon",
                    link: "https://gamejolt.com/games/bumbl/825643"
                },
                {
                    id: "game_cod_battlegrounds",
                    title: "Create or Destroy: Battlegrounds",
                    description: "A sandbox combat experience.",
                    fullText: "Enter the Battlegrounds. A sandbox combat experience where creativity meets destruction. Build your defenses, craft your loadout, and tear down your enemies.",
                    image: "https://raw.githubusercontent.com/vermetra/lsswebsite/main/images/games/codb.png?raw=true", 
                    releaseDate: "Indefinetly on hold",
                    link: "https://gamejolt.com/games/createordestroy/760772"
                }
            ],
            // ---------------------------------
            // SUBSIDIARIES & THEIR GAMES
            // ---------------------------------
            subsidiaries: [
                {
                    id: "sub_ande",
                    name: "ANdᴱ Studios",
                    tagline: "Experimental & Fan Projects",
                    description: "Creators of The Reactor, Five Shifts at Fazbear's, and The Diner.",
                    fullText: "ANdᴱ Studios focuses on experimental gameplay and high-quality fan works. They are a key pillar of the Left-Sided family.",
                    image: "https://raw.githubusercontent.com/vermetra/lsswebsite/main/images/studios/ande_banner.png?raw=true",
                    games: [
                        {
                            id: "game_ande_fnaf",
                            title: "Five Shifts at Fazbear's",
                            description: "A survival horror fan-game.",
                            fullText: "You work as a security guard at the local, recently opened Freddy Fazbear's Pizza Parlor. Featuring State of the art \"Animatronics\", performing and singing robots to bring joy to the children. Recently, the Nightguard stopped showing responding to calls and showing up to work after last night's shift. So you were given a 50% raise to work his shift.",
                            image: "https://raw.githubusercontent.com/vermetra/lsswebsite/main/images/games/fsaf.png?raw=true", 
                            releaseDate: "Available on GameJolt",
                            link: "https://gamejolt.com/games/fsaf/989425"
                        },
                        {
                            id: "game_ande_reactor",
                            title: "The Reactor",
                            description: "Simulation and crisis management.",
                            fullText: "Play as John Rendel, a low-level intern at the Zielum plant, who just so happened to be 2 doors down from ground zero. Your goal is to escape the Superreactor grounds to find your family and get out of Simmersville.",
                            image: "https://raw.githubusercontent.com/vermetra/lsswebsite/main/images/games/thereactor_banner.png?raw=true", 
                            releaseDate: "Available on GameJolt",
                            link: "https://gamejolt.com/games/thereactor/1028009"
                        },
                    ]
                },
                {
                    id: "sub_gotchya",
                    name: "Gotch-ya Studios",
                    tagline: "Dark Narrative Games",
                    description: "Home of Shadow of The Sanctified.",
                    fullText: "Gotch-ya Studios specializes in darker, narrative-driven experiences that challenge the player's perception.",
                    image: "https://placehold.co/800x400/3e0909/fecaca?text=GOTCH-YA+STUDIOS",
                    games: [
                        {
                            id: "game_gotchya_shadow",
                            title: "Shadow of The Sanctified",
                            description: "Dark fantasy RPG adventure.",
                            fullText: "Explore a world shrouded in darkness. Shadow of The Sanctified combines classic RPG elements with modern storytelling to create an atmospheric journey into the unknown.",
                            image: "https://raw.githubusercontent.com/vermetra/lsswebsite/main/images/games/sots1.png?raw=true", 
                            releaseDate: "Available on GameJolt",
                            link: "https://gamejolt.com/games/SOTF1/1027993"
                        }
                    ]
                },
                {
                    id: "sub_bomb_banana",
                    name: "Bomb Banana Studios",
                    tagline: "Quirky & Energetic",
                    description: "Developers of Eyebo.",
                    fullText: "Bomb Banana Studios brings energy and color to the collective. Their games are known for unique visual styles and fun mechanics.",
                    image: "https://placehold.co/800x400/ffaa00/1f2937?text=BOMB+BA-NANA+STUDIOS",
                    games: [
                        {
                            id: "game_bomb_eyebo",
                            title: "Eyebo",
                            description: "Hack-and-slash platformer.",
                            fullText: "A hack-and-slash platformer through a grim and monster-filled world. You follow Eyebo, an aspiring warrior, as he tries to make his way to the top.",
                            image: "https://placehold.co/800x600/1e40af/bfdbfe?text=EYEBO+ACTION+PLATFORMER",
                            releaseDate: "View on Google Sites",
                            link: "https://sites.google.com/view/leftsidedstudios/subsidiaries/bomb-banana-studios/eyebo?authuser=0"
                        }
                    ]
                },
                {
                    id: "sub_skullix",
                    name: "Skullix Media Group",
                    tagline: "Media & Production",
                    description: "Supporting media production for Left-Sided projects.",
                    fullText: "Skullix Media Group handles various media production aspects, ensuring high-quality content delivery across the network.",
                    image: "https://raw.githubusercontent.com/vermetra/lsswebsite/main/images/studios/skullix.png?raw=true",
                    games: []
                },
                {
                    id: "sub_endgame",
                    name: "Endgame Studios",
                    tagline: "Innovative Gameplay",
                    description: "Focused on pushing boundaries with 'Project Sentinel'.",
                    fullText: "Endgame Studios is the latest addition to our roster, currently working on 'Project Sentinel', an innovative multiplayer tower defense game.",
                    image: "https://raw.githubusercontent.com/vermetra/lsswebsite/main/images/studios/endgamestudios.png?raw=true",
                    games: [
                        {
                            id: "game_endgame_sentinel",
                            title: "Project Sentinel",
                            description: "Innovative multiplayer tower defense.",
                            fullText: "Project Sentinel is the current unannounced project from Endgame Studios. It is planned to be an innovative multiplayer tower defense game that focuses on cooperative strategy and resource management, pushing the boundaries of the genre.",
                            image: "https://placehold.co/800x600/166534/a7f3d0?text=PROJECT+SENTINEL+TD", 
                            releaseDate: "Unannounced",
                            link: null 
                        }
                    ]
                }
            ],
            // ---------------------------------
            // PARTNERS
            // ---------------------------------
            partners: [
                {
                    id: "partner_citadel",
                    name: "Citadel Studios",
                    type: "Strategic Partner",
                    description: "Collaborating on shared development goals.",
                    fullText: "Citadel Studios is a close partner of Left-Sided Studios, working together to expand the reach and quality of indie games.",
                    image: "https://raw.githubusercontent.com/vermetra/lsswebsite/main/images/studios/cs_banner.png?raw=true",
                    website: "https://gamejolt.com/@CitadelStudiosOfficial"
                }
            ]
        };

        // ==========================================
        // 2. CORE FUNCTIONS
        // ==========================================
        const app = document.getElementById('app');

        function toggleMobileMenu() {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        }
        
        // Function to toggle between dark and light themes
        function toggleTheme() {
            const body = document.body;
            const isDarkMode = body.classList.contains('light-mode') === false;
            
            // Get all theme toggle icons/elements
            const desktopToggleIcon = document.getElementById('theme-toggle')?.querySelector('i');
            const mobileToggleIcon = document.getElementById('mobile-theme-icon');

            if (isDarkMode) {
                // Switch to Light Mode
                body.classList.add('light-mode');
                localStorage.setItem('theme', 'light');
                if (desktopToggleIcon) desktopToggleIcon.setAttribute('data-lucide', 'moon');
                if (mobileToggleIcon) mobileToggleIcon.setAttribute('data-lucide', 'moon');
            } else {
                // Switch to Dark Mode
                body.classList.remove('light-mode');
                localStorage.setItem('theme', 'dark');
                if (desktopToggleIcon) desktopToggleIcon.setAttribute('data-lucide', 'sun');
                if (mobileToggleIcon) mobileToggleIcon.setAttribute('data-lucide', 'sun');
            }
            
            // Re-render lucide icons to ensure the theme toggle icon updates immediately
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        }

        // Function to apply theme on initial page load
        function applySavedTheme() {
            const savedTheme = localStorage.getItem('theme');
            const body = document.body;

            // Default to dark if no preference is saved or if preference is 'dark'
            if (!savedTheme || savedTheme === 'dark') {
                body.classList.remove('light-mode');
            } else if (savedTheme === 'light') {
                body.classList.add('light-mode');
            }
        }


        // Dynamic link calculation for the "Back to Google Site" button
        function getGoogleSiteUrl() {
            let url = db.siteMap.home;
            switch(currentPageName) {
                case 'games':
                case 'gameDetail':
                    url = db.siteMap.games;
                    break;
                case 'subsidiaries':
                case 'subsidiaryDetail':
                    url = db.siteMap.subsidiaries;
                    break;
                case 'partners':
                case 'partnerDetail':
                    url = db.siteMap.partners;
                    break;
                case 'contact':
                    url = db.siteMap.contact;
                    break;
                default:
                    url = db.siteMap.home;
            }
            return url;
        }

        // Redirect function using the calculated URL
        function redirectToGoogleSite() {
            const url = getGoogleSiteUrl();
            window.open(url, '_blank');
        }

        function renderPage(pageName, id = null) {
            window.scrollTo(0,0);
            app.innerHTML = '';
            
            // Update global state
            currentPageName = pageName;
            currentPageId = id;

            // Render view based on pageName
            switch(pageName) {
                case 'home': renderHome(); break;
                case 'games': renderGamesList(db.games, "Our Games"); break;
                case 'gameDetail': renderGameDetail(id); break;
                case 'subsidiaries': renderSubsidiariesList(); break;
                case 'subsidiaryDetail': renderSubsidiaryDetail(id); break;
                case 'partners': renderPartners(); break;
                case 'partnerDetail': renderPartnerDetail(id); break;
                case 'contact': renderContact(); break; // New Contact Page
                default: renderHome();
            }

            // Ensure icons are created after content is rendered
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
            
            // Update footer links and button visibility after rendering
            updateConnectLinks();

            // Manually update the icon state for the theme toggle based on current body class
            const currentTheme = document.body.classList.contains('light-mode') ? 'light' : 'dark';
            const desktopIcon = document.getElementById('theme-toggle')?.querySelector('i');
            const mobileIcon = document.getElementById('mobile-theme-icon');
            if (desktopIcon) desktopIcon.setAttribute('data-lucide', currentTheme === 'light' ? 'moon' : 'sun');
            if (mobileIcon) mobileIcon.setAttribute('data-lucide', currentTheme === 'light' ? 'moon' : 'sun');
        }

        // Function to dynamically update footer links
        function updateConnectLinks() {
            const container = document.getElementById('connect-links');
            if (!container) return;
            
            // Static links
            let html = `
                <li><a href="https://gamejolt.com/@LeftSidedStudios" target="_blank" class="hover:text-white transition-colors flex items-center gap-2"><i data-lucide="monitor" class="w-4 h-4"></i> GameJolt (Main)</a></li>
                <!-- UPDATED Discord Link -->
                <li><a href="https://discord.gg/A8XMvSnkCU" target="_blank" class="hover:text-white transition-colors flex items-center gap-2"><i data-lucide="message-square-text" class="w-4 h-4"></i> Discord Server</a></li>
                <li><a href="mailto:leftsidedstudios@gmail.com" class="hover:text-white transition-colors flex items-center gap-2"><i data-lucide="mail" class="w-4 h-4"></i> Email Us</a></li>
            `;

            // Dynamic team links
            html += '<li class="pt-4 text-white font-semibold flex items-center gap-2"><i data-lucide="users" class="w-4 h-4"></i> Team & Individual Links</li>';
            
            db.people.forEach(person => {
                let icon = 'user'; // Default icon
                if (person.icon === 'youtube') icon = 'youtube';
                else if (person.icon === 'gamepad-2') icon = 'gamepad-2';
                else if (person.icon === 'zap') icon = 'zap';

                html += `
                    <li>
                        <a href="${person.link}" target="_blank" class="hover:text-white transition-colors flex items-center gap-2">
                            <i data-lucide="${icon}" class="w-4 h-4 text-gray-600"></i> ${person.name}
                        </a>
                    </li>
                `;
            });

            container.innerHTML = html;
            
            // Re-render lucide icons
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        }

        // Helper to render a single founder card
        function renderFounderCard(founder) {
            // FIX: Use the first link to make the entire card clickable, ensuring the pfp click works.
            const primaryLink = founder.links.length > 0 ? founder.links[0].url : '#';

            const linkHtml = founder.links.map(link => {
                // Use the correct Lucide icon name
                const iconName = link.icon; 
                return `
                    <a href="${link.url}" target="_blank" class="text-gray-400 hover:text-white transition-colors" title="${link.label}" onclick="event.stopPropagation()">
                        <i data-lucide="${iconName}" class="w-5 h-5"></i>
                    </a>
                `;
            }).join('');

            return `
                <div 
                    class="bg-neutral-900 p-6 rounded-xl border border-white/5 flex flex-col items-center text-center cursor-pointer card-hover" 
                    onclick="window.open('${primaryLink}', '_blank')"
                >
                    <img src="${founder.image}" class="w-24 h-24 rounded-full object-cover mb-4 border-4 border-neutral-700" alt="${founder.name}" onerror="this.onerror=null; this.src='https://placehold.co/96x96/4c1d95/e0e7ff?text=${founder.name.charAt(0)}';">
                    <h3 class="text-2xl font-bold text-white">${founder.name}</h3>
                    <p class="text-sm font-mono text-blue-400 mb-4">${founder.role}</p>
                    <p class="text-gray-400 text-sm italic mb-4 flex-grow">${founder.bio}</p>
                    <div class="flex space-x-4 mt-auto">
                        ${linkHtml}
                    </div>
                </div>
            `;
        }
        
        // Function to create a mailto link from form data
        function sendContactEmail(event) {
            event.preventDefault(); // Stop default form submission

            const name = document.getElementById('contact-name').value;
            const email = document.getElementById('contact-email').value;
            const subject = document.getElementById('contact-subject').value;
            const message = document.getElementById('contact-message').value;
            const statusMessage = document.getElementById('email-status-message');

            if (!name || !subject || !message) {
                statusMessage.textContent = "Please fill out all required fields (Name, Subject, Message).";
                statusMessage.classList.remove('hidden', 'text-green-400');
                statusMessage.classList.add('text-red-400');
                return;
            }

            // Construct the email body
            let emailBody = `Sender Name: ${name}\n`;
            if (email) {
                emailBody += `Sender Email: ${email}\n\n`;
            } else {
                emailBody += `Sender Email: Not Provided\n\n`;
            }
            emailBody += "--- Message ---\n";
            emailBody += message;
            
            // Encode subject and body for the mailto link
            const encodedSubject = encodeURIComponent(`LSS Website Inquiry: ${subject}`);
            const encodedBody = encodeURIComponent(emailBody);
            
            const mailtoLink = `mailto:leftsidedstudios@gmail.com?subject=${encodedSubject}&body=${encodedBody}`;

            // Open the mail client
            window.location.href = mailtoLink;

            // Show a success message
            statusMessage.textContent = "Your email client is opening with your pre-filled message! Please confirm and send the draft.";
            statusMessage.classList.remove('hidden', 'text-red-400');
            statusMessage.classList.add('text-green-400');
            document.getElementById('contact-form').reset(); // Clear form after 'send' action
            
            // Reset status message appearance after a few seconds
            setTimeout(() => {
                statusMessage.classList.add('hidden');
                statusMessage.classList.remove('text-green-400');
                statusMessage.classList.add('text-gray-500');
            }, 8000);
        }

        // ==========================================
        // 3. VIEW FUNCTIONS
        // ==========================================

        // --- VIEW: HOME ---
        function renderHome() {
            const foundersHtml = Object.values(db.teamDetails).map(renderFounderCard).join('');

            const html = `
                <div class="fade-in space-y-20">
                    <section class="relative h-[60vh] w-full rounded-2xl overflow-hidden border border-white/10">
                        <img src="${db.about.featuredImage}" class="absolute inset-0 w-full h-full object-cover opacity-60" alt="Hero" onerror="this.onerror=null; this.src='https://placehold.co/1920x1080/000000/FFFFFF?text=LSS+STUDIOS+BANNER';">
                        <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent"></div>
                        <div class="absolute bottom-0 left-0 p-8 md:p-16 max-w-3xl">
                            <h1 class="text-5xl md:text-7xl font-bold text-white mb-6 tracking-tighter">${db.about.title}</h1>
                            <p class="text-xl text-gray-300 leading-relaxed">${db.about.subtitle}</p>
                        </div>
                    </section>
                    
                    <section class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div onclick="renderPage('games')" class="card-hover bg-neutral-900 p-8 rounded-xl border border-white/5 cursor-pointer group">
                            <i data-lucide="gamepad-2" class="w-10 h-10 text-white mb-4 group-hover:text-blue-400 transition-colors"></i>
                            <h2 class="text-2xl font-bold text-white mb-2">Games</h2>
                            <p class="text-gray-500">Explore our core titles.</p>
                        </div>
                        <div onclick="renderPage('subsidiaries')" class="card-hover bg-neutral-900 p-8 rounded-xl border border-white/5 cursor-pointer group">
                            <i data-lucide="network" class="w-10 h-10 text-white mb-4 group-hover:text-purple-400 transition-colors"></i>
                            <h2 class="text-2xl font-bold text-white mb-2">Subsidiaries</h2>
                            <p class="text-gray-500">Meet the specialized teams.</p>
                        </div>
                        <div onclick="renderPage('partners')" class="card-hover bg-neutral-900 p-8 rounded-xl border border-white/5 cursor-pointer group">
                            <i data-lucide="users" class="w-10 h-10 text-white mb-4 group-hover:text-green-400 transition-colors"></i>
                            <h2 class="text-2xl font-bold text-white mb-2">Partners</h2>
                            <p class="text-gray-500">Our collaborative network.</p>
                        </div>
                    </section>
                    
                    <!-- Meet the Co-Founders Section -->
                    <section class="mt-20">
                        <h2 class="text-4xl font-extrabold text-center text-white mb-4">Meet the Co-Founders</h2>
                        <p class="text-center text-gray-400 text-lg mb-12 max-w-3xl mx-auto">
                            Left-Sided Studios is founded by three cousins—Vermetra, DaRealSansYT, and RocketBlasts—united by a passion for gaming and creation.
                        </p>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            ${foundersHtml}
                        </div>
                    </section>

                    <section class="max-w-4xl mx-auto text-center border-t border-white/10 pt-12">
                        <p class="text-2xl md:text-3xl font-light text-gray-400 leading-relaxed">"${db.about.text}"</p>
                    </section>
                </div>
            `;
            app.innerHTML = html;
        }

        // --- VIEW: CONTACT ---
        function renderContact() {
            const html = `
                <div class="fade-in max-w-4xl mx-auto">
                    <h1 class="text-5xl font-extrabold text-white mb-4">Get In Touch</h1>
                    <p class="text-xl text-gray-400 mb-12">We love hearing from our fans, partners, and aspiring developers. Connect with us through the channels below!</p>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
                        <!-- Primary Contacts Section -->
                        <div>
                            <h2 class="text-3xl font-bold text-white mb-6 border-b border-white/10 pb-3">Official Channels</h2>
                            <div class="space-y-6">
                                <div class="flex items-start gap-4 p-4 rounded-xl bg-neutral-900 border border-white/5">
                                    <i data-lucide="mail" class="w-6 h-6 text-blue-400 mt-1"></i>
                                    <div>
                                        <h3 class="text-xl font-semibold text-white">General & Business Inquiries</h3>
                                        <p class="text-gray-400 text-sm">For partnerships, press, or business matters.</p>
                                        <a href="mailto:leftsidedstudios@gmail.com" class="text-blue-400 font-medium hover:underline block mt-2">leftsidedstudios@gmail.com</a>
                                    </div>
                                </div>
                                <div class="flex items-start gap-4 p-4 rounded-xl bg-neutral-900 border border-white/5">
                                    <i data-lucide="message-square-text" class="w-6 h-6 text-purple-400 mt-1"></i>
                                    <div>
                                        <h3 class="text-xl font-semibold text-white">Community & Support</h3>
                                        <p class="text-gray-400 text-sm">Join our official Discord server for real-time chat, support, and announcements.</p>
                                        <!-- UPDATED Discord Link -->
                                        <a href="https://discord.gg/A8XMvSnkCU" target="_blank" class="text-purple-400 font-medium hover:underline block mt-2">Join Our Discord Server</a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Team Links Section (reusing people data) -->
                        <div>
                            <h2 class="text-3xl font-bold text-white mb-6 border-b border-white/10 pb-3">Team & Content Creators</h2>
                            <div class="space-y-4">
                                ${db.people.map(person => {
                                    let icon = 'user'; 
                                    if (person.icon === 'youtube') icon = 'youtube';
                                    else if (person.icon === 'gamepad-2') icon = 'gamepad-2';
                                    else if (person.icon === 'zap') icon = 'zap';

                                    return `
                                        <a href="${person.link}" target="_blank" class="flex items-center justify-between p-3 rounded-lg bg-neutral-900 hover:bg-neutral-800 transition-colors border border-white/5">
                                            <div class="flex items-center gap-4">
                                                <i data-lucide="${icon}" class="w-5 h-5 text-gray-500"></i>
                                                <span class="text-white">${person.name}</span>
                                            </div>
                                            <i data-lucide="external-link" class="w-4 h-4 text-gray-600"></i>
                                        </a>
                                    `;
                                }).join('')}
                            </div>
                        </div>
                    </div>
                    
                    <!-- Live Mailto Form Section -->
                    <section class="mt-16 bg-neutral-900 p-10 rounded-2xl border border-white/5">
                        <h2 class="text-3xl font-bold text-white mb-6">Send Us a Message</h2>
                        <form id="contact-form" onsubmit="sendContactEmail(event)">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <input type="text" id="contact-name" placeholder="Your Name (Required)" required class="bg-neutral-950 p-3 rounded-lg border border-neutral-700 text-white focus:ring-blue-500 focus:border-blue-500">
                                <input type="email" id="contact-email" placeholder="Your Email (for our reference)" class="bg-neutral-950 p-3 rounded-lg border border-neutral-700 text-white focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            <input type="text" id="contact-subject" placeholder="Subject (Required)" required class="w-full mt-4 bg-neutral-950 p-3 rounded-lg border border-neutral-700 text-white focus:ring-blue-500 focus:border-blue-500">
                            <textarea rows="5" id="contact-message" placeholder="Your Message (Required)" required class="w-full mt-4 bg-neutral-950 p-3 rounded-lg border border-neutral-700 text-white focus:ring-blue-500 focus:border-blue-500"></textarea>
                            <button type="submit" class="mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg transition-colors shadow-lg shadow-blue-500/30">
                                Send Message
                            </button>
                            <p id="email-status-message" class="text-sm text-gray-500 mt-3 text-center hidden">
                                Your email client should now be open with your message pre-filled!
                            </p>
                        </form>
                    </section>
                </div>
            `;
            app.innerHTML = html;
        }

        // --- VIEW: GAMES LIST ---
        function renderGamesList(gamesArray, title) {
            let gridHtml = gamesArray.map(game => `
                <div onclick="renderPage('gameDetail', '${game.id}')" class="fade-in card-hover group cursor-pointer relative aspect-[4/3] overflow-hidden rounded-xl bg-neutral-900 border border-white/10">
                    <img src="${game.image}" class="absolute inset-0 w-full h-full object-cover opacity-70 group-hover:opacity-40 transition-opacity duration-500" alt="${game.title}" onerror="this.onerror=null; this.src='https://placehold.co/800x600/1e293b/FFFFFF?text=${game.title.replace(/\s/g, '+')}';">
                    <div class="absolute inset-0 p-6 flex flex-col justify-end bg-gradient-to-t from-black/90 to-transparent">
                        <h3 class="text-3xl font-bold text-white mb-2">${game.title}</h3>
                        <p class="text-gray-300 line-clamp-2">${game.description}</p>
                        <div class="mt-4 text-sm font-mono text-blue-400 flex items-center gap-2">
                            DETAILS <i data-lucide="arrow-right" class="w-4 h-4"></i>
                        </div>
                    </div>
                </div>
            `).join('');

            const html = `
                <div class="fade-in">
                    <div class="mb-12 flex items-center gap-4">
                        <button onclick="renderPage('home')" class="p-2 rounded-full bg-white/5 hover:bg-white/10"><i data-lucide="arrow-left"></i></button>
                        <h1 class="text-4xl font-bold text-white">${title}</h1>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        ${gridHtml}
                    </div>
                </div>
            `;
            app.innerHTML = html;
        }

        // --- VIEW: GAME DETAIL ---
        function renderGameDetail(gameId) {
            // Find game in main list OR subsidiaries
            let game = db.games.find(g => g.id === gameId);
            let parentContext = 'games';
            let parentLabel = 'Games';
            let parentId = null;
            
            if (!game) {
                for (let sub of db.subsidiaries) {
                    game = sub.games.find(g => g.id === gameId);
                    if (game) {
                        parentContext = 'subsidiaryDetail';
                        parentLabel = sub.name;
                        parentId = sub.id;
                        break;
                    }
                }
            }

            // Fallback if game is still not found (shouldn't happen with proper ID passing)
            if (!game) {
                console.error("Game not found for ID:", gameId);
                renderPage('home');
                return;
            }

            const backAction = parentId 
                ? `renderPage('${parentContext}', '${parentId}')` 
                : `renderPage('${parentContext}')`;

            const isLinkActive = game.link !== null;
            const buttonText = isLinkActive ? (game.link.includes('gamejolt') ? 'VIEW ON GAMEJOLT' : 'VIEW WEBSITE') : 'COMING SOON';
            const buttonAction = isLinkActive ? `window.open('${game.link}', '_blank')` : '';
            const buttonClass = isLinkActive ? "bg-white hover:bg-gray-200 text-black" : "bg-neutral-800 text-gray-500 cursor-not-allowed";

            const html = `
                <div class="fade-in max-w-4xl mx-auto">
                    <div class="mb-8 flex items-center gap-3 text-sm text-gray-500">
                        <button onclick="${backAction}" class="hover:text-white flex items-center gap-1">
                            <i data-lucide="chevron-left" class="w-4 h-4"></i> Back to ${parentLabel}
                        </button>
                        <span>/</span>
                        <span class="text-white">${game.title}</span>
                    </div>

                    <div class="rounded-2xl overflow-hidden border border-white/10 mb-12">
                        <img src="${game.image}" class="w-full h-[50vh] object-cover" alt="${game.title}" onerror="this.onerror=null; this.src='https://placehold.co/1000x500/1e293b/FFFFFF?text=${game.title.replace(/\s/g, '+')}';">
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
                        <div class="md:col-span-2">
                            <h1 class="text-5xl font-bold text-white mb-6">${game.title}</h1>
                            <p class="text-xl text-gray-300 leading-relaxed mb-8">${game.fullText}</p>
                        </div>
                        <div class="md:col-span-1">
                            <div class="bg-neutral-900 p-6 rounded-xl border border-white/5">
                                <h3 class="text-sm font-bold text-gray-500 uppercase tracking-wider mb-4">Info</h3>
                                <div class="space-y-4">
                                    <div>
                                        <span class="block text-xs text-gray-600">RELEASE</span>
                                        <span class="text-white">${game.releaseDate || "Released"}</span>
                                    </div>
                                    <div>
                                        <span class="block text-xs text-gray-600">PLATFORM</span>
                                        <span class="text-white">PC Only</span>
                                    </div>
                                    <button ${isLinkActive ? '' : 'disabled'} onclick="${buttonAction}" class="w-full mt-4 font-bold py-3 rounded transition-colors ${buttonClass}">
                                        ${buttonText}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            app.innerHTML = html;
        }

        // --- VIEW: SUBSIDIARIES LIST ---
        function renderSubsidiariesList() {
            let gridHtml = db.subsidiaries.map(sub => `
                <div onclick="renderPage('subsidiaryDetail', '${sub.id}')" class="fade-in card-hover bg-neutral-900 border border-white/5 rounded-xl overflow-hidden cursor-pointer flex flex-col h-full">
                    <div class="h-48 overflow-hidden relative">
                         <!-- Placeholder color adjusted to match new placeholders -->
                         <div class="absolute inset-0 bg-purple-900/20 mix-blend-overlay"></div>
                         <img src="${sub.image}" class="w-full h-full object-cover" alt="${sub.name}" onerror="this.onerror=null; this.src='https://placehold.co/800x400/3730a3/FFFFFF?text=${sub.name.replace(/\s/g, '+')}';">
                    </div>
                    <div class="p-8 flex-grow">
                        <h3 class="text-2xl font-bold text-white mb-1">${sub.name}</h3>
                        <p class="text-purple-400 text-xs font-mono uppercase tracking-widest mb-4">${sub.tagline}</p>
                        <p class="text-gray-400 text-sm">${sub.description}</p>
                    </div>
                    <div class="px-8 pb-8 pt-0 flex justify-between items-center">
                         <span class="text-xs text-gray-500 border border-gray-700 px-2 py-1 rounded-full">${sub.games.length} Projects</span>
                         <span class="text-xs text-white flex items-center gap-1">View Studio <i data-lucide="arrow-right" class="w-3 h-3"></i></span>
                    </div>
                </div>
            `).join('');

            const html = `
                <div class="fade-in">
                    <div class="mb-12 flex items-center gap-4">
                        <button onclick="renderPage('home')" class="p-2 rounded-full bg-white/5 hover:bg-white/10"><i data-lucide="arrow-left"></i></button>
                        <h1 class="text-4xl font-bold text-white">Subsidiaries</h1>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        ${gridHtml}
                    </div>
                </div>
            `;
            app.innerHTML = html;
        }

        // --- VIEW: SUBSIDIARY DETAIL ---
        function renderSubsidiaryDetail(subId) {
            const sub = db.subsidiaries.find(s => s.id === subId);

            if (!sub) {
                console.error("Subsidiary not found for ID:", subId);
                renderPage('subsidiaries');
                return;
            }
            
            let gamesGrid = sub.games.map(game => `
                <div onclick="renderPage('gameDetail', '${game.id}')" class="card-hover bg-black border border-neutral-800 rounded-lg p-4 cursor-pointer flex items-center gap-4">
                    <img src="${game.image}" class="w-24 h-24 object-cover rounded bg-neutral-800" alt="${game.title}" onerror="this.onerror=null; this.src='https://placehold.co/96x96/1e293b/FFFFFF?text=${game.title.replace(/\s/g, '+').substring(0, 5)}';">
                    <div>
                        <h4 class="text-xl font-bold text-white">${game.title}</h4>
                        <p class="text-sm text-gray-500">${game.description}</p>
                    </div>
                    <div class="ml-auto text-gray-600">
                        <i data-lucide="chevron-right"></i>
                    </div>
                </div>
            `).join('');

            const html = `
                <div class="fade-in max-w-5xl mx-auto">
                     <div class="mb-8 flex items-center gap-3 text-sm text-gray-500">
                        <button onclick="renderPage('subsidiaries')" class="hover:text-white flex items-center gap-1"><i data-lucide="chevron-left" class="w-4 h-4"></i> All Subsidiaries</button>
                        <span>/</span>
                        <span class="text-white">${sub.name}</span>
                    </div>

                    <div class="bg-neutral-900 rounded-2xl p-8 md:p-12 border border-white/5 mb-12 flex flex-col md:flex-row gap-8 items-start">
                        <img src="${sub.image}" class="w-32 h-32 rounded-full object-cover border-2 border-white/10" alt="${sub.name}" onerror="this.onerror=null; this.src='https://placehold.co/128x128/3730a3/FFFFFF?text=${sub.name.replace(/\s/g, '+').substring(0, 5)}';">
                        <div>
                            <h1 class="text-4xl font-bold text-white mb-2">${sub.name}</h1>
                            <p class="text-purple-400 font-mono mb-4">${sub.tagline}</p>
                            <p class="text-gray-300 max-w-2xl mb-4">${sub.fullText || sub.description}</p>
                        </div>
                    </div>

                    <h2 class="text-2xl font-bold text-white mb-6 border-b border-white/10 pb-4">Projects by ${sub.name}</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        ${gamesGrid.length > 0 ? gamesGrid : '<p class="text-gray-500 italic">No public projects listed yet.</p>'}
                    </div>
                </div>
            `;
            app.innerHTML = html;
        }

        // --- VIEW: PARTNERS LIST ---
        function renderPartners() {
            let gridHtml = db.partners.map(partner => `
                <div onclick="renderPage('partnerDetail', '${partner.id}')" class="fade-in cursor-pointer bg-neutral-900 p-6 rounded-xl border border-white/5 flex flex-col items-center text-center card-hover group">
                    <div class="w-24 h-24 rounded-full overflow-hidden mb-4 border border-white/10">
                        <img src="${partner.image}" class="w-full h-full object-cover" alt="${partner.name}" onerror="this.onerror=null; this.src='https://placehold.co/96x96/10b981/FFFFFF?text=${partner.name.replace(/\s/g, '+').substring(0, 5)}';">
                    </div>
                    <h3 class="text-xl font-bold text-white group-hover:text-green-400 transition-colors">${partner.name}</h3>
                    <p class="text-xs text-gray-500 uppercase font-bold tracking-wider mb-2">${partner.type}</p>
                    <p class="text-gray-400 text-sm mb-4 line-clamp-2">${partner.description}</p>
                    <span class="text-xs text-gray-600 flex items-center gap-1">View Profile <i data-lucide="arrow-right" class="w-3 h-3"></i></span>
                </div>
            `).join('');

            const html = `
                <div class="fade-in">
                    <div class="mb-12 flex items-center gap-4">
                        <button onclick="renderPage('home')" class="p-2 rounded-full bg-white/5 hover:bg-white/10"><i data-lucide="arrow-left"></i></button>
                        <h1 class="text-4xl font-bold text-white">Strategic Partners</h1>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
                        ${gridHtml}
                    </div>
                </div>
            `;
            app.innerHTML = html;
        }

        // --- VIEW: PARTNER DETAIL ---
        function renderPartnerDetail(partnerId) {
            const partner = db.partners.find(p => p.id === partnerId);

            if (!partner) {
                console.error("Partner not found for ID:", partnerId);
                renderPage('partners');
                return;
            }

            const html = `
                <div class="fade-in max-w-3xl mx-auto">
                    <div class="mb-8 flex items-center gap-3 text-sm text-gray-500">
                        <button onclick="renderPage('partners')" class="hover:text-white flex items-center gap-1"><i data-lucide="chevron-left" class="w-4 h-4"></i> All Partners</button>
                        <span>/</span>
                        <span class="text-white">${partner.name}</span>
                    </div>

                    <div class="bg-neutral-900 border border-white/10 rounded-2xl p-8 text-center md:text-left flex flex-col md:flex-row items-center md:items-start gap-8">
                        <img src="${partner.image}" class="w-32 h-32 rounded-full object-cover border-4 border-black" alt="${partner.name}" onerror="this.onerror=null; this.src='https://placehold.co/128x128/10b981/FFFFFF?text=${partner.name.replace(/\s/g, '+').substring(0, 5)}';">
                        <div>
                            <h1 class="text-3xl font-bold text-white mb-2">${partner.name}</h1>
                            <span class="inline-block bg-green-900/30 text-green-400 text-xs font-bold px-3 py-1 rounded-full mb-4">${partner.type}</span>
                            <p class="text-gray-300 text-lg leading-relaxed mb-6">${partner.fullText || partner.description}</p>
                            
                            <a href="${partner.website || '#'}" target="_blank" class="inline-flex items-center gap-2 text-white bg-white/10 hover:bg-white/20 px-4 py-2 rounded transition-colors font-medium text-sm">
                                <i data-lucide="globe" class="w-4 h-4"></i> Visit Official Website
                            </a>
                        </div>
                    </div>
                </div>
            `;
            app.innerHTML = html;
        }

        // Init: Call renderPage on window load, ensuring all external scripts (like lucide.js) are available.
        window.onload = function() {
            applySavedTheme(); // 1. Load saved theme preference
            renderPage('home'); // 2. Render content
        };

    </script>
</body>
</html>